<h1 id="embench-user-guide">Embench™ User Guide</h1>
<!--
Contributor Jeremy Bennett <jeremy.bennett@embecosm.com>
Contributor Roger Shepherd <roger.shepherd@rcjd.net>

SPDX-License-Identifier: GFDL-1.2

Document conventions:
- 80 character lines
- Wikipedia heading conventions (First word only capitalized, unless a proper
  noun)
- US spelling throughout.
- Run "make spell" before committing changes.
- Do not commit the PDF!
- The first line must not be the "comment" which inserts the ToC
-->
<p>Authors: Embench™ Task Group Issue: 1.0</p>
<p>Copyright (C) 2009, 2013, 2019 Embecosm Limited</p>
<p>This document is part of Embench and was formerly part of the
Bristol/Embecosm Embedded Benchmark Suite. It is made freely available
under the terms of the GNU Free Documentation License version 1.2 or
later.</p>
<p>Embench is a trade mark of the Embench Task Group of the Free and
Open Source Silicon Foundation.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<!-- ToC can be updated using 'make toc' in a Linux like systems -->
<!-- Insert ToC here -->
<ul>
<li><a href="#about-embench">About Embench</a>
<ul>
<li><a href="#the-bristolembecosm-embedded-benchmark-suite-beebs">The
Bristol/Embecosm Embedded Benchmark Suite (BEEBS)</a></li>
<li><a href="#future-work">Future work</a></li>
<li><a href="#feedback-and-how-to-contribute">Feedback and how to
contribute</a></li>
<li><a href="#contributors">Contributors</a></li>
<li><a href="#document-history">Document history</a></li>
</ul></li>
<li><a href="#building-and-running-embench">Building and running
Embench</a>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#preparation">Preparation</a></li>
<li><a href="#configuring-the-benchmarks">Configuring the
benchmarks</a></li>
<li><a href="#building-the-benchmarks">Building the benchmarks</a></li>
<li><a href="#running-the-benchmark-of-code-size">Running the benchmark
of code size</a></li>
<li><a href="#running-the-benchmark-of-code-speed">Running the benchmark
of code speed</a></li>
</ul></li>
<li><a href="#recording-reliable-results">Recording reliable
results</a></li>
<li><a href="#statistics-of-computing-benchmarks">Statistics of
computing benchmarks</a>
<ul>
<li><a href="#computing-a-benchmark-value-for-speed">Computing a
benchmark value for speed</a></li>
<li><a href="#computing-a-benchmark-value-for-code-size">Computing a
benchmark value for code size</a></li>
</ul></li>
<li><a href="#reference-platform">Reference platform</a></li>
<li><a href="#documentation">Documentation</a>
<ul>
<li><a href="#building-the-documentation">Building the
documentation</a></li>
</ul></li>
<li><a href="#adding-a-new-board-to-embench">Adding a New Board to
Embench</a>
<ul>
<li><a href="#where-to-add-files">Where to add files</a></li>
<li><a href="#configuration-files">Configuration files</a></li>
<li><a href="#header-files">Header files</a></li>
</ul></li>
<li><a
href="#the-gnu-free-documentation-license-version-1.2-november-2002">The
GNU Free Documentation License version 1.2, November 2002</a>
<ul>
<li><a href="#preamble">Preamble</a></li>
<li><a href="#applicability-and-definitions">Applicability and
definitions</a></li>
<li><a href="#verbatim-copying">Verbatim copying</a></li>
<li><a href="#copying-in-quantity">Copying in quantity</a></li>
<li><a href="#modifications">Modifications</a></li>
<li><a href="#combining-documents">Combining documents</a></li>
<li><a href="#collections-of-documents">Collections of
documents</a></li>
<li><a href="#aggregation-with-independent-works">Aggregation with
independent works</a></li>
<li><a href="#translation">Translation</a></li>
<li><a href="#termination">Termination</a></li>
<li><a href="#future-revisions-of-this-license">Future revisions of this
license</a></li>
<li><a
href="#addendum-how-to-use-this-license-for-your-documents">Addendum:
how to use this License for your documents</a></li>
</ul></li>
</ul>
<!-- End of ToC insertion -->
<h2 id="about-embench">About Embench</h2>
<p>Embench is a suite of free and open source C benchmarks, all of which
are small real-world programs suitable for running on deeply embedded
systems with at least 64kB of ROM and 64kB of RAM.</p>
<p>Embench is based on the following principles:</p>
<ol type="1">
<li><strong>Embench must be free:</strong>
<ul>
<li>if behind a paywall, it is not going to be as widely used; and</li>
<li>academics publish frequently and can promote the use of benchmarks,
so free and open accelerates their adoption and hence publicizes
benchmarks to the rest of the community.</li>
</ul></li>
<li><strong>Embench must be easy to port and run:</strong>
<ul>
<li>if very difficult or expensive to port and run, then it will not be
as widely used; and</li>
<li>Linpack, Dhrystone, and CoreMark don’t have good reputations yet are
widely reported presumably because they are free and easy to port and
run.</li>
</ul></li>
<li><strong>Embench must be a suite of <em><em>real</em></em>
programs:</strong>
<ul>
<li>real programs are much likely to be representative than synthetic
programs;</li>
<li>a realistic workload is easier to represent as a suite of programs
than as a single program;</li>
<li>compilers and hardware change rapidly, so benchmarks need to evolve
over time to deprecate pieces that are newly irrelevant and add missing
features that speak to current challenge;</li>
<li>a single program is hard to evolve; and</li>
<li>a suite of around 20 real programs means a more realistic workload
that is much easier to evolve.</li>
</ul></li>
<li><strong>Embench must have a supporting organization that maintains
its relevance over time:</strong>
<ul>
<li>need an organization to evolve the suite over time;</li>
<li>goal of refreshes every two years; and</li>
<li>set up inside an existing organization, the Free and Open Source
Silicon Foundation (FOSSi), rather than creating a new
organization.</li>
</ul></li>
<li><strong>Embench must report a single summarizing performance
score:</strong>
<ul>
<li>if no official single performance score, then it won’t be as widely
reported;</li>
<li>even worse, others may supply unofficial summaries that are either
misleading or conflicting;</li>
<li>might include orthogonal measures, like code size or power – each
would have a summarizing score.</li>
</ul></li>
<li><strong>Embench should use geometric mean and standard deviation to
summarize:</strong>
<ul>
<li>recommend first calculating the ratios of performance relative to a
reference platform; and</li>
<li>report geometric mean (GM) of ratios + geometric standard deviation
(GSD).</li>
</ul></li>
<li><strong>Embench must involve both academia and industry:</strong>
<ul>
<li>academia helps maintain fair benchmarks for the whole field;</li>
<li>industry helps ensure that programs genuinely important in the real
world; and</li>
<li>we need both communities participating to succeed.</li>
</ul></li>
</ol>
<h3 id="the-bristolembecosm-embedded-benchmark-suite-beebs">The
Bristol/Embecosm Embedded Benchmark Suite (BEEBS)</h3>
<p>The benchmarks are largely derived from <a
href="https://beebs.mageec.org/">BEEBS</a>, which in turn draws its
material from various earlier projects, notably:</p>
<ul>
<li><a href="http://vhosts.eecs.umich.edu/mibench">MiBench</a>;</li>
<li><a href="http://www.mrtc.mdh.se/projects/wcet/benchmarks.html">the
WCET benchmark collection</a>;</li>
<li><a
href="https://www.ice.rwth-aachen.de/research/tools-projects/closed-projects/dspstone/">DSPstone</a>;</li>
<li><a href="http://sglib.sourceforge.net/">the Simple Generic
Library</a>; and</li>
<li><a href="https://www.lysator.liu.se/~nisse/nettle/">the Nettle
low-level cryptographic library</a>.</li>
</ul>
<p>For the reasoning behind the choice of benchmarks in BEEBS, see <a
href="http://arxiv.org/abs/1308.5174">BEEBS: Open Benchmarks for Energy
Measurements on Embedded Platforms</a> by J Pallister, S Hollis and J
Bennett . For an example of BEEBS in use, see <a
href="http://arxiv.org/abs/1303.6485">Identifying Compiler Options to
Minimise Energy Consumption for Embedded Platforms</a> by J Pallister, S
Hollis and J Bennett.</p>
<h3 id="future-work">Future work</h3>
<p>This is a work in progress. This first stable release 0.5 was
published at the Embedded World Conference in February 2020. It is
intended to allow the wider community to explore a stable version of the
platform.</p>
<p>Based on feedback from this exercise, it is anticipated that the
first full release will be produced by the end of 2020.</p>
<h3 id="feedback-and-how-to-contribute">Feedback and how to
contribute</h3>
<p>Comments on this document should be made through the <a
href="https://lists.librecores.org/listinfo/embench">Embench mailing
list</a>. Proposed changes may be submitted as git pull requests.</p>
<p>You are encouraged to contribute to this repository by submitting
pull requests and by commenting on pull requests submitted by other
people.</p>
<p><strong>Note.</strong> Don’t forget to add your own name to the list
of contributors in the document.</p>
<h3 id="contributors">Contributors</h3>
<p>This document has been created by the following people (in
alphabetical order of surname).</p>
<ul>
<li>Jeremy Bennett.</li>
</ul>
<h3 id="document-history">Document history</h3>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 14%" />
<col style="width: 22%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th><em>Revision</em></th>
<th><em>Date</em></th>
<th><em>Author(s)</em></th>
<th><em>Modification</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WIP</td>
<td>9 Aug 20</td>
<td>Roger Shepherd</td>
<td>Note re python module names</td>
</tr>
<tr class="even">
<td>WIP</td>
<td>19 Jul 20</td>
<td>Jeremy Bennett</td>
<td>Add pyelftools to prerequisites.</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>0.5</td>
<td>27 Feb 20</td>
<td>David Patterson</td>
<td>Incorporate latest review comments</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>Jon Taylor</td>
<td>to accompany release 0.5. Update</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>Jeremy Bennett</td>
<td>document versioning for</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>consistency with release</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>numbering.</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>21 Jan 20</td>
<td>Lyell Read</td>
<td>Correcting partial sentence and</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>removing duplicate log file flag</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>definition.</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>0.5 rc2</td>
<td>13 Nov 19</td>
<td>Jeremy Bennett</td>
<td>Migrated to markdown and updated</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>to refer to Python scripts.</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>Version previously known as draft</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>0.6.</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>0.5 rc1</td>
<td>6 Jun 19</td>
<td>Jeremy Bennett</td>
<td>First draft of this document,</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>drawing heavily on the BEEBS</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td>documentation. Version previously</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>known as draft 0.5.</td>
</tr>
</tbody>
</table>
<h2 id="building-and-running-embench">Building and running Embench</h2>
<p>The benchmarks have to be first compiled, then they can then be
measured on the target.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>Embench expects the following version of tools. Update your system
accordingly.</p>
<table>
<thead>
<tr class="header">
<th><em>Components</em></th>
<th><em>Version</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>python</td>
<td>3.6 or later</td>
</tr>
</tbody>
</table>
<p>The following non-standard Python packages are needed.</p>
<table>
<thead>
<tr class="header">
<th><em>Package</em></th>
<th><em>Comments</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>pyelftools</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="preparation">Preparation</h3>
<p>Unpack the software. Either extract from the supplied <em>tar</em>
file:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> xf embench-VERSION.tar.bz2</span></code></pre></div>
<p>or clone this git repository:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/embench/embench-iot.git</span></code></pre></div>
<h3 id="configuring-the-benchmarks">Configuring the benchmarks</h3>
<p>The benchmarks are configured in several ways:</p>
<ul>
<li>default values in the build script</li>
<li>an architecture specific configuration file
<ul>
<li>found in <code>config/&lt;architecture&gt;/arch.cfg</code></li>
<li>for example <a
href="../config/riscv32/arch.cfg"><code>config/riscv32/arch.cfg</code></a>;</li>
</ul></li>
<li>a chip specific configuration file
<ul>
<li>found in
<code>config/&lt;architecture&gt;/chips/&lt;chip&gt;/chip.cfg</code></li>
<li>for example <a
href="../config/riscv32/chips/speed-test/chip.cfg"><code>config/riscv32/chips/speed-test/chip.cfg</code></a>;</li>
</ul></li>
<li>a board specific configuration file
<ul>
<li>found in
<code>config/&lt;architecture&gt;/boards/&lt;board&gt;/board.cfg</code></li>
<li>for example <a
href="../config/riscv32/boards/ri5cyverilator/board.cfg"><code>config/riscv32/boards/ri5cyverilator/board.cfg</code></a>;
and</li>
</ul></li>
<li>on the command line to the build script.</li>
</ul>
<p>Any number of these may be specified, they may duplicate
specification, in which case the configuration latest in the list takes
precedence, or in the case of flags, the flags are appended to the list,
so any later flags take precedence.</p>
<p>In addition there may be chip and board specific heads and code:</p>
<ul>
<li>a chip specific header in
<code>config/&lt;architecture&gt;/chips/&lt;chip&gt;/chipsupport.h</code>
<ul>
<li>for example <a
href="../config/riscv32/chips/speed-test/chipsupport.h"><code>config/riscv32/chips/speed-test/chipsupport.h</code></a>;</li>
</ul></li>
<li>chip specific code in
<code>config/&lt;architecture&gt;/chips/&lt;chip&gt;/chipsupport.c</code>
<ul>
<li>for example <a
href="../config/riscv32/chips/speed-test/chipsupport.c"><code>config/riscv32/chips/speed-test/chipsupport.c</code></a>;</li>
</ul></li>
<li>a board specific header in
<code>config/&lt;architecture&gt;/boards/&lt;board&gt;/boardsupport.h</code>
<ul>
<li>for example <a
href="../config/riscv32/boards/ri5cyverilator/boardsupport.h"><code>config/riscv32/boards/ri5cyverilator/boardsupport.h</code></a>;
and</li>
</ul></li>
<li>board specific code in
<code>config/&lt;architecture&gt;/boards/&lt;board&gt;/boardsupport.c</code>
<ul>
<li>for example <a
href="../config/riscv32/boards/ri5cyverilator/boardsupport.c"><code>config/riscv32/boards/ri5cyverilator/boardsupport.c</code></a>.</li>
</ul></li>
</ul>
<p>The configuration files (architecture, chip, board) take the form of
assignments to python variables. The following parameters may be
set.</p>
<ul>
<li><code>cc</code>: The C compiler to use. Default value
<code>cc</code>.</li>
<li><code>ld</code>: The linker to use. Default value is be the same
value as was set for <code>cc</code>, which means with most modern
compilers there is no need to set <code>ld</code>, since the compiler
can act as a linker driver.</li>
<li><code>cflags</code>: A Python list of additional compiler flags,
which are appended to any other compiler flags. Default is the empty
list.</li>
<li><code>ldflags</code>: A Python list of additional linker flags,
which are appended to any other linker flags. Default is the empty
list.</li>
<li><code>cc-define1-pattern</code>: A Python formatted string pattern
with positional arguments to be used when defining a constant on the
compiler command line. Default value <code>-D{0}</code>.</li>
<li><code>cc-define2-pattern</code>: A Python formatted string pattern
with positional arguments to be used when defining a constant to a
specific value on the compiler command line. Default value
<code>-D{0}={1}</code>.</li>
<li><code>cc-incdir-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying an include
directory on the compiler command line. Default value
<code>-I{0}</code>.</li>
<li><code>cc-input-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the input file on
the compiler command line. Default value <code>{0}</code>.</li>
<li><code>cc-output-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the output file on
the compiler command line. Default value <code>-o {0}</code>.</li>
<li><code>ld-input-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the input file on
the linker command line. Default value <code>{0}</code>.</li>
<li><code>ld-output-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the output file on
the linker command line. Default value <code>-o {0}</code>.</li>
<li><code>user-libs</code>: A list of libraries to be appended to the
linker command line. The libraries may be absolute file names or
arguments to the linker. In the latter case corresponding arguments in
<code>ldflags</code> may be needed. For example with GCC or Clang/LLVM
if <code>-l</code> flags are used in <code>user_libs</code>, then
<code>-L</code> flags may be needed in <code>ldflags</code>. Default
value is the empty list.</li>
<li><code>dummy-libs</code>: A list of dummy libraries to be used (for
example if system libraries have been disabled through options in
<code>ldflags</code>). Dummy libraries have their source in the <a
href="../support"><code>support</code></a> subdirectory. Thus if
<code>crt0</code> is specified, there should be a source file
<code>dummy-crt0.c</code> in the <a
href="../support"><code>support</code></a> directory. Default value is
the empty list.</li>
<li><code>cpu-mhz</code>: The clock rate of the target in MHz. Default
value 1.</li>
<li><code>warmup-heat</code>: How many times the benchmark code should
be run to warm up the caches. Default value 1.</li>
<li><code>timeout</code>: The maximum time (in seconds) allowed for the
compiler or the linker to run for each invocation. Default value 5.</li>
</ul>
<p>Any other variables are silently ignored. There is no need to set an
unused parameter, and any configuration file may be empty or missing if
no flags need to be set.</p>
<p>The board and chip specific files are used only to provide code
essential to the functionality. Chip support files are usually empty.
The board support header (<code>boardsupport.h</code>) is typically used
to define the clock rate of the board, for example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CPU_MHZ </span><span class="dv">1</span></span></code></pre></div>
<p>The board support code file (<code>boardsupport.c</code>) is used to
define three functions.</p>
<ul>
<li><code>void initialise_board ()</code>: Called to set up the
board;</li>
<li><code>void start_trigger ()</code>: Called when we start timing the
benchmark, to start any board specific timing mechanism.</li>
<li><code>void stop_trigger ()</code>: Called when we stop timing the
benchmark, to stop any board specific timing mechanism.</li>
</ul>
<h3 id="building-the-benchmarks">Building the benchmarks</h3>
<p>Embench is built with the <a
href="../build_all.py"><code>build_all.py</code></a> script, which takes
the following arguments.</p>
<ul>
<li><code>--builddir</code>: The programs are build out of tree, this
specifies the directory in which to build. It may be an absolute or
relative directory name; if the latter, it will be relative to the top
level directory of the repository. Default value <code>bd</code>.</li>
<li><code>--logdir</code>: A log file is created with detailed
information about the build. This specifies the directory in which to
place the log file. It may be an absolute or relative directory name; if
the latter, it will be relative to the top level directory of the
repository. Default value <code>logs</code>.</li>
<li><code>--arch</code>: This mandatory argument specifies the
architecture for which the benchmarks are to be built. It corresponds to
a directory name in the main <a href="../config"><code>config</code></a>
directory.</li>
<li><code>--chip</code>: This mandatory argument specifies the chip
being used and corresponds to a directory within the <code>chips</code>
subdirectory of the architecture configuration directory.</li>
<li><code>--board</code>: This mandatory argument specifies the board
being used and corresponds to a directory within the <code>boards</code>
subdirectory of the architecture configuration directory.</li>
<li><code>--cc</code>: The C compiler to be used. Default value
<code>cc</code>.</li>
<li><code>--ld</code>: The linker to be used. Default value the same
value as for <code>--cc</code></li>
<li><code>--cflags</code>: A space separated list of additional C flags
to be appended to the compiler flags. Default value empty.</li>
<li><code>--ldflags</code>: A space separated list of additional linker
flags to be appended to the linker flags. Default value empty.</li>
<li><code>--cc-define1-pattern</code>: A Python formatted string pattern
with positional arguments to be used when defining a constant on the
compiler command line. Default value <code>-D{0}</code>.</li>
<li><code>--cc-define2-pattern</code>: A Python formatted string pattern
with positional arguments to be used when defining a constant to a
specific value on the compiler command line. Default value
<code>-D{0}={1}</code>.</li>
<li><code>--cc-incdir-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying an include
directory on the compiler command line. Default value
<code>-I{0}</code>.</li>
<li><code>--cc-input-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the input file on
the compiler command line. Default value <code>{0}</code>.</li>
<li><code>--cc-output-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the output file on
the compiler command line. Default value <code>-o {0}</code>.</li>
<li><code>--ld-input-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the input file on
the linker command line. Default value <code>{0}</code>.</li>
<li><code>--ld-output-pattern</code>: A Python formatted string pattern
with positional arguments to be used when specifying the output file on
the linker command line. Default value <code>-o {0}</code>.</li>
<li><code>--user-libs</code>: A space separated list of libraries to be
appended to the linker command line. The libraries may be absolute file
names or arguments to the linker. In the latter case corresponding
arguments in <code>--ldflags</code> may be needed. For example with GCC
or Clang/LLVM if <code>-l</code> flags are used in
<code>--user_libs</code>, then <code>-L</code> flags may be needed in
<code>--ldflags</code>. Default value empty.</li>
<li><code>--dummy-libs</code>: A space separated list of dummy libraries
to be used (for example if system libraries have been disabled through
options in <code>--ldflags</code>). Dummy libraries have their source in
the <a href="../support"><code>support</code></a> subdirectory. Thus if
<code>crt0</code> is specified, there should be a source file
<code>dummy-crt0.c</code> in the <a
href="../support"><code>support</code></a> directory. Default value
empty.</li>
<li><code>--cpu-mhz</code>: The clock rate of the target in MHz. Default
value 1.</li>
<li><code>--warmup-heat</code>: How many times the benchmark code should
be run to warm up the caches. Default value 1.</li>
<li><code>--timeout</code>: The maximum time (in seconds) allowed for
the compiler or the linker to run for each invocation. Default value
5.</li>
<li><code>--clean</code>: Delete all intermediaries and final files from
any previous runs of the script.</li>
<li><code>--help</code>: Provide help on the arguments.</li>
</ul>
<p>Example: The following command builds the benchmarks for generic
RISC-V RV32IMC machine. The flags include: - -c (to compile the C code
prior to linking) - -O2 to optimize for speed - -ffunction-sections to
generate a separate ELF section for each function, allowing the linker
to delete unused functions - -march=rv32imc to target the RV32IMC
variant - -mabi=ilp32 to use 32-bit integers, longs, and pointers -
-Wl,-gc-sections pass an option to the linker to delete unused sections
- -lm to link the math libraries needed for some benchmarks</p>
<p><code>./build_all.py --arch riscv32 --chip generic --board ri5cyverilator --cc riscv64-unknown-elf-gcc --cflags="-c -O2 -ffunction-sections -march=rv32imc -mabi=ilp32" --ldflags="-Wl,-gc-sections" --user-libs="-lm"</code></p>
<p>Depending on your GCC installation, your compiler might be called
riscv32-unknown-elf-gcc instead.</p>
<h3 id="running-the-benchmark-of-code-size">Running the benchmark of
code size</h3>
<p>Benchmarking code size uses the <a
href="../benchmark_size.py"><code>benchmark_size.py</code></a> script,
which takes the following arguments.</p>
<ul>
<li><code>--format</code>: Specifies the file format of executable
executable and/or object files. The option are <code>elf</code> and
<code>macho</code>. Default value <code>elf</code>.</li>
<li><code>--builddir</code>: The programs are build out of tree, this
specifies the directory in which the programs were built. It may be an
absolute or relative directory name; if the latter, it will be relative
to the top level directory of the repository. Default value
<code>bd</code>.</li>
<li><code>--logdir</code>: A log file is created with detailed
information about the benchmark run. This specifies the directory in
which to place the log file. It may be an absolute or relative directory
name; if the latter, it will be relative to the top level directory of
the repository. Default value <code>logs</code>.</li>
<li><code>--baselinedir &lt;dir&gt;</code>: Specifies the directory in
which reference size data can be found. May be an absolute or relative
directory name. If it is relative then it will be interpreted as
relative to the top level directory of the repository. The default value
is <code>baseline-data</code>, and size data will be sourced from
<code>baseline-data/size.json</code>.</li>
<li><code>--relative</code> or <code>--absolute</code>: If
<code>--relative</code> is specified, present benchmark results relative
to the baseline architecture. If <code>--absolute</code> is specified,
present absolute benchmark results. If neither is specified, present
relative results, because this is the defined norm for Embench.</li>
<li><code>--text</code>: A space separated list of sections containing
code. Default value for elf format files <code>.text</code>; for macho
format files <code>__text</code>.</li>
<li><code>--data</code>: A space separated list of sections containing
non-zero initialized writable data. Default value for elf format files
<code>.data</code>; for macho format files <code>__data</code>. The
option <code>--metric</code> with the respective section type needs to
be used in order to have the sections added to the size
calculation.</li>
<li><code>--rodata</code>: A space separated list of sections containing
read only data. Default value for elf format files <code>.rodata</code>;
for macho format files <code>__cstring __const</code>. The option
<code>--metric</code> with the respective section type needs to be used
in order to have the sections added to the size calculation.</li>
<li><code>--bss</code>: A space separated list of sections containing
zero initialized data. Default value for elf format files
<code>.bss</code>, for macho format files <code>__bss</code>. The option
<code>--metric</code> with the respective section type needs to be used
in order to have the sections added to the size calculation.</li>
<li><code>--metric</code>. A space separated list of section types to
include when calculating the benchmark metric. Any section listed with
the options <code>--text</code>, <code>--data</code>,
<code>--rodata</code> and <code>--bss</code> is included in the
respective section type. Permitted values ares <code>text</code>,
<code>data</code>, <code>rodata</code>, <code>bss</code>. Default value
<code>text</code>.</li>
<li><code>--text-output</code>: Output the text in a plain text format.
This is the default.</li>
<li><code>--json-output</code>: Output the results in json format,
instead of the default plain text format.</li>
<li><code>--baseline-output</code>: Output results in a format suitable
for use as baseline data instead of the default text format. This can be
used instead of the reference data in
<code>baseline-data/size.json</code>.</li>
<li><code>--help</code>: Provide help on the arguments.</li>
</ul>
<h3 id="running-the-benchmark-of-code-speed">Running the benchmark of
code speed</h3>
<p>Benchmark code speed uses the <a
href="../benchmark_speed.py"><code>benchmark_speed.py</code></a> script,
which takes the following general arguments.</p>
<ul>
<li><code>--builddir</code>: The programs are build out of tree, this
specifies the directory in which the programs were built. It may be an
absolute or relative directory name; if the latter, it will be relative
to the top level directory of the repository. Default value
<code>bd</code>.</li>
<li><code>--logdir</code>: A log file is created with detailed
information about the build. This specifies the directory in which to
place the log file. It may be an absolute or relative directory name; if
the latter, it will be relative to the top level directory of the
repository. Default value <code>logs</code>.</li>
<li><code>--baselinedir &lt;dir&gt;</code>: Specifies the directory in
which reference speed data can be found. May be an absolute or relative
directory name. If it is relative then it will be interpreted as
relative to the top level directory of the repository. The default value
is <code>baseline-data</code>, and speed data will be sourced from
<code>baseline-data/speed.json</code>.</li>
<li><code>--relative</code> or <code>--absolute</code>: If
<code>--relative</code> is specified, present benchmark results relative
to the baseline architecture. If <code>--absolute</code> is specified,
present absolute benchmark results. If neither is specified, present
relative results, because this is the defined norm for Embench.</li>
<li><code>--text-output</code>: Output the text in a plain text format.
This is the default.</li>
<li><code>--json-output</code>: Output the results in json format,
instead of the default plain text format.</li>
<li><code>--baseline-output</code>: Output results in a format suitable
for use as baseline data instead of the default text format. This can be
used instead of the reference data in
<code>baseline-data/speed.json</code>.</li>
<li><code>--target-module &lt;target module&gt;</code>: This mandatory
argument specifies a python module in the <a
href="../pylib"><code>pylib</code></a> directory with definitions of
routines to run the benchmark. Note that the argument specifies the name
of module (e.g. <a
href="../pylib/run_stm32f4-discovery.py"><code>run_stm32f4-discovery</code></a>)
not the name of the file that contains the module (e.g. <a
href="../pylib/run_stm32f4-discovery.py"><code>run_stm32f4-discovery.py</code></a>).</li>
<li><code>--timeout</code>: The maximum time (in seconds) allowed for
each benchmark program to run. Default value 30.</li>
<li><code>--help</code>: Provide help on the arguments.</li>
</ul>
<p>There is so much variation in how a benchmark can be run that the
detailed implementation is left to a python module specified by
<code>--target-module</code>. This module may define additional
arguments. If this module has been specified when <code>--help</code>
has also been specified, help will be provided on the target module’s
arguments.</p>
<h2 id="recording-reliable-results">Recording reliable results</h2>
<p>For each benchmark run, you must record:</p>
<ul>
<li>details of the platform used, including its clock speed;</li>
<li>if the platform is simulated or real. If simulated, an indication of
accuracy must be stated (i.e., fully cycle accurate or cycle
approximate);</li>
<li>for a simulated platform, configuration options of the chip should
be stated (e.g., branch predictor size, cache sizes, and so on);</li>
<li>details of the chip on the platform, including its precise
architecture variant;</li>
<li>details of the compiler tool chain used, typically the version of
each component and library, or for development tool chains the
repository commit ID of each component;</li>
<li>the compiler and linker flags used for the benchmarks, which should
be the same for each benchmark program; and</li>
<li>the version of Embench used.</li>
</ul>
<p>For clarification compiler flags, whose effect is to vary the choice
and parameters of optimization passes on a per program (or per
compilation unit or function) basis are permitted. For example flags
which use machine learning techniques to match source code styles with
the a choice of optimization passes.</p>
<p>The philosophy of recorded data should be such that anyone else can
take the same platform and toolchain and duplicate the results.</p>
<h2 id="statistics-of-computing-benchmarks">Statistics of computing
benchmarks</h2>
<p>These computations are carried out by the benchmark scripts.</p>
<h3 id="computing-a-benchmark-value-for-speed">Computing a benchmark
value for speed</h3>
<p>Carry out the following steps.</p>
<ul>
<li>For each benchmark record the time take to execute between
<code>start_trigger</code> and <code>stop_trigger</code>, which should
be a few seconds.</li>
<li>This time should be recorded using hardware internal to the device
being benchmarked - e.g., CPU cycle counter or other fast timer (i.e.,
running at a significantly higher rate than the benchmark takes to
run).</li>
<li>For each benchmark divide the time taken by the value used for
<code>CPU_MHZ</code> in the configuration to give a normalized time
value.</li>
<li>For each benchmark, compute its speed relative to the reference
platform - see <a href="#reference-platform">Reference platform</a> - by
dividing the normalized time value of the reference benchmark by the
normalized time calculated in the previous step.</li>
<li>Calculate the geometric mean, geometric standard deviation and range
of one geometric standard deviation of the relative speeds.</li>
</ul>
<p>The benchmark value is the geometric mean of the relative speeds. A
larger value means a faster platform. The range gives an indication of
how much variability there is in this performance.</p>
<p>In addition the geometric mean may then be divided by the value used
for CPU_MHZ, to yield an Embench score per MHz. This is an indication of
the efficiency of the platform in carrying out computation.</p>
<h3 id="computing-a-benchmark-value-for-code-size">Computing a benchmark
value for code size</h3>
<p>Benchmarks should be compiled with dummy versions of all standard
libraries. Carry out the following steps:</p>
<ul>
<li>For each benchmark record the size of all <code>.text</code>
sections.</li>
<li>For each benchmark, compute its size relative to the reference
platform - see <a href="#reference-platform">Reference platform</a> - by
dividing the size recorded in the previous step by the size of the
corresponding reference benchmark.</li>
<li>Calculate the geometric mean, geometric standard deviation and range
of one geometric standard deviation of the relative size.</li>
</ul>
<p>The benchmark value is the geometric mean of the relative size. A
larger value means code is larger. The range gives an indication of how
much variability there is in this measurement.</p>
<p><strong>NOTE</strong> The computation of the relative value is
inverted compared to the computation for speed. This means that for
size, small is good.</p>
<p><strong>NOTE</strong> Older versions of the GNU <em>size</em> program
report the size of <code>.text</code> + <code>.rodata</code> section. In
measuring the size, ensure you use a modern version of <em>size</em>
which supports the <code>-G</code> flag, which will yield the size of
just <code>.text</code> sections.</p>
<h2 id="reference-platform">Reference platform</h2>
<p>The reference CPU is an Arm Cortex M4 processor without the floating
point unit (FPU). The reference platform is a ST Microelectronics
STM32F4 Discovery Board - see <a
href="https://www.st.com/en/evaluation-tools/stm32f4discovery.html">www.st.com/en/evaluation-tools/stm32f4discovery.html</a>
using its default clock speed of 16MHz. The processor on this board does
contain a FPU, but this is disabled by use of appropriate compiler
options (see below). The code is compiled using GCC 9.2.0, GNU binutils
2.33.1 and newlib 3.3.0. Newlib is configured for small code size -
known as the “nanolib” configuration.</p>
<p>The board can be obtained directly from ST Microelectronics, using
the above link, but is also widely available from other suppliers,
including Farnell, RS Electronics, Mouser and several suppliers on
Amazon.</p>
<p>For the speed benchmarks, the compiler flags used are:</p>
<pre><code>-O2 -ffunction-sections -march=armv7-m -mcpu=cortex-m4 -mfloat-abi=soft -mthumb</code></pre>
<p>For the size benchmarks, the compiler flags used are:</p>
<pre><code>-Os -ffunction-sections -march=armv7-m -mcpu=cortex-m4 -mfloat-abi=soft -mthumb</code></pre>
<p>In both cases the linker flags are:</p>
<pre><code>-T&lt;embench-iot-root&gt;/config/arm/boards/stm32f4-discovery/STM32F407XG.ld
-O2 -Wl,-gc-sections -march=armv7-m -mcpu=cortex-m4 -mfloat-abi=soft -mthumb
-specs=nosys.specs</code></pre>
<p>The directory <code>&lt;embench-iot-root&gt;</code> is the root
directory of the <code>embench-iot</code> repository.</p>
<p>Speed is measured using the platform’s internal cycle counter
registers, which can be converted to time from knowledge of the
platform’s clock speed.</p>
<p>The reference results can be found in the files
<code>baseline-data/speed.json</code> and
<code>baseline-data/size.json</code> in the repository. For convenience
the key values are recorded here:</p>
<table>
<thead>
<tr class="header">
<th><em>Benchmark</em></th>
<th style="text-align: right;"><em>Speed</em></th>
<th style="text-align: right;"><em>Size</em></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>aha-mont64</code></td>
<td style="text-align: right;">4,004</td>
<td style="text-align: right;">1,072</td>
</tr>
<tr class="even">
<td><code>crc32</code></td>
<td style="text-align: right;">4,010</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="odd">
<td><code>cubic</code></td>
<td style="text-align: right;">3,931</td>
<td style="text-align: right;">1,584</td>
</tr>
<tr class="even">
<td><code>edn</code></td>
<td style="text-align: right;">4,010</td>
<td style="text-align: right;">1,324</td>
</tr>
<tr class="odd">
<td><code>huffbench</code></td>
<td style="text-align: right;">4,120</td>
<td style="text-align: right;">1,242</td>
</tr>
<tr class="even">
<td><code>matmult-int</code></td>
<td style="text-align: right;">3,985</td>
<td style="text-align: right;">492</td>
</tr>
<tr class="odd">
<td><code>minver</code></td>
<td style="text-align: right;">3,998</td>
<td style="text-align: right;">1,168</td>
</tr>
<tr class="even">
<td><code>nbody</code></td>
<td style="text-align: right;">2,808</td>
<td style="text-align: right;">950</td>
</tr>
<tr class="odd">
<td><code>nettle-aes</code></td>
<td style="text-align: right;">4,026</td>
<td style="text-align: right;">2,148</td>
</tr>
<tr class="even">
<td><code>nettle-sha256</code></td>
<td style="text-align: right;">3,997</td>
<td style="text-align: right;">3,396</td>
</tr>
<tr class="odd">
<td><code>nsichneu</code></td>
<td style="text-align: right;">4,001</td>
<td style="text-align: right;">11,968</td>
</tr>
<tr class="even">
<td><code>picojpeg</code></td>
<td style="text-align: right;">4,030</td>
<td style="text-align: right;">6,964</td>
</tr>
<tr class="odd">
<td><code>qrduino</code></td>
<td style="text-align: right;">4,253</td>
<td style="text-align: right;">5,814</td>
</tr>
<tr class="even">
<td><code>sglib-combined</code></td>
<td style="text-align: right;">3,981</td>
<td style="text-align: right;">2,272</td>
</tr>
<tr class="odd">
<td><code>slre</code></td>
<td style="text-align: right;">4,010</td>
<td style="text-align: right;">2,200</td>
</tr>
<tr class="even">
<td><code>st</code></td>
<td style="text-align: right;">4,080</td>
<td style="text-align: right;">1,000</td>
</tr>
<tr class="odd">
<td><code>statemate</code></td>
<td style="text-align: right;">4,001</td>
<td style="text-align: right;">4,484</td>
</tr>
<tr class="even">
<td><code>ud</code></td>
<td style="text-align: right;">3,999</td>
<td style="text-align: right;">720</td>
</tr>
<tr class="odd">
<td><code>wikisort</code></td>
<td style="text-align: right;">2,779</td>
<td style="text-align: right;">4,296</td>
</tr>
</tbody>
</table>
<p><strong>NOTE</strong> Speed is measured in milliseconds, size is
total size of all <code>.text</code> sections in bytes.</p>
<h2 id="documentation">Documentation</h2>
<p>The documentation is recorded in the file <a
href="../doc/README.md"><code>doc/README.md</code></a> using GitHub
flavored Markdown. Whilst very simple in the formatting it permits, this
format is used for portability.</p>
<h3 id="building-the-documentation">Building the documentation</h3>
<p>The documentation can be viewed directly on GitHub - see <a
href="../doc/README.md"><code>doc/README.md</code></a>. However if
<em>hunspell</em>, <em>pandoc</em> and associated utilities are
installed, then a <em>Makefile</em> is provided which can do the
following on Linux like systems:</p>
<ul>
<li>spell check the document, listing any misspelled words
(<code>make spell</code>);</li>
<li>insert a table of comments into the document
(<code>make toc</code>);</li>
<li>build a HTML version of the document (<code>make html</code>);</li>
<li>build a PDF version of the document (<code>make pdf</code>);</li>
</ul>
<p>Any custom words for spell checking should be added to the file <a
href="../doc/custom.wordlist"><code>custom.wordlist</code></a>.</p>
<h2 id="adding-a-new-board-to-embench">Adding a New Board to
Embench</h2>
<h3 id="where-to-add-files">Where to add files</h3>
<p>If the board uses a completely new architecture, you will need to
create a new subdirectory within the <code>config</code> directory.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> config</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> ARCH</span></code></pre></div>
<p>The architecture name comes from the first part of the host triplet
(the <code>--host</code> configuration argument).</p>
<p>Within this <em>ARCH</em> directory create two separate directories
for board and chip configurations</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ARCH</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> boards</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> chips</span></code></pre></div>
<p>If the architecture already has a board defined, these directories
will already exist.</p>
<p>Then for your new board, create a directory in the <code>chips</code>
directory for the chip it will use (if the directory does not already
exist).</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> chips</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> CHIPNAME</span></code></pre></div>
<p>The <em>CHIPNAME</em> corresponds to the argument given to
<code>--with-chip</code> when configuring.</p>
<p>Similarly create a directory in the <code>board</code> directory for
the new board. Since this is a new board, this directory will not
already exist.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> boards</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> BOARDNAME</span></code></pre></div>
<p>The <em>BOARDNAME</em> corresponds to the argument given to
<code>--with-board</code> when configuring.</p>
<h3 id="configuration-files">Configuration files</h3>
<p>Configuration data may be defined for the architecture, for the chip
and for the board. These files are found respectively in</p>
<pre><code>config/ARCH/arch.cfg
config/ARCH/boards/BOARDNAME/board.cfg
config/ARCH/chips/CHIPNAME/chip.cfg</code></pre>
<p>The format and content of these files is described in <a
href="#configuring-the-benchmarks">Configuring the benchmarks</a>.</p>
<h3 id="header-files">Header files</h3>
<p>There are two standard header files which may be defined:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">config/ARCH/boards/BOARDNAME/boardsupport.h</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">config/ARCH/chips/CHIPNAME/chipsupport.h</span></span></code></pre></div>
<p>These are combined into the general header <code>support.h</code>
which is included by all benchmarks, and defines values which may be
used by the benchmarks.</p>
<p>Board specific code that is to be linked in to the benchmarks should
be defined in <code>config/ARCH/boards/BOARDNAME/boardsupport.c</code>.
This file should define the following functions:</p>
<ul>
<li><code>initialize_board</code> which is called to initialize the
board;</li>
<li><code>start_trigger</code> which is called at the start of the test
run; and</li>
<li><code>stop_trigger</code> which is called at the end of the test
run.</li>
</ul>
<p>It is usual for this file to include <code>support.h</code> to pick
up any board and chip specific definitions that may prove useful.</p>
<p>Typically the tests are run using GDB and a remote GDB server to load
the programs into a remote target. This can set breakpoint on
<code>start_trigger</code> and <code>stop_trigger</code> to start and
stop timing. In this case, these two function need no actual content,
and the following is a sufficient implementation:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>start_trigger <span class="op">()</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  __asm__ <span class="dt">volatile</span> <span class="op">(</span><span class="st">&quot;&quot;</span> <span class="op">:</span> <span class="op">:</span> <span class="op">:</span> <span class="st">&quot;memory&quot;</span><span class="op">);</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>stop_trigger <span class="op">()</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  __asm__ <span class="dt">volatile</span> <span class="op">(</span><span class="st">&quot;&quot;</span> <span class="op">:</span> <span class="op">:</span> <span class="op">:</span> <span class="st">&quot;memory&quot;</span><span class="op">);</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>By marking the inline assembly volatile and clobbering memory, we
guarantee a function which will just contain a return statement.</p>
<h2
id="the-gnu-free-documentation-license-version-1.2-november-2002">The
GNU Free Documentation License version 1.2, November 2002</h2>
<p>Copyright (C) 2000,2001,2002 Free Software Foundation, Inc. 51
Franklin St, Fifth Floor, Boston, MA 02110-1301, USA</p>
<p>Everyone is permitted to copy and distribute verbatim copies of this
license document, but changing it is not allowed.</p>
<h3 id="preamble">Preamble</h3>
<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it, with
or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible for
modifications made by others.</p>
<p>This License is a kind of “copyleft”, which means that derivative
works of the document must themselves be free in the same sense. It
complements the GNU General Public License, which is a copyleft license
designed for free software.</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free program
should come with manuals providing the same freedoms that the software
does. But this License is not limited to software manuals; it can be
used for any textual work, regardless of subject matter or whether it is
published as a printed book. We recommend this License principally for
works whose purpose is instruction or reference.</p>
<h3 id="applicability-and-definitions">Applicability and
definitions</h3>
<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License. Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein. The “Document”, below, refers
to any such manual or work. Any member of the public is a licensee, and
is addressed as “you”. You accept the license if you copy, modify or
distribute the work in a way requiring permission under copyright
law.</p>
<p>A “Modified Version” of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.</p>
<p>A “Secondary Section” is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document’s overall subject
(or to related matters) and contains nothing that could fall directly
within that overall subject. (Thus, if the Document is in part a
textbook of mathematics, a Secondary Section may not explain any
mathematics.) The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.</p>
<p>The “Invariant Sections” are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice that
says that the Document is released under this License. If a section does
not fit the above definition of Secondary then it is not allowed to be
designated as Invariant. The Document may contain zero Invariant
Sections. If the Document does not identify any Invariant Sections then
there are none.</p>
<p>The “Cover Texts” are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License. A Front-Cover Text may be
at most 5 words, and a Back-Cover Text may be at most 25 words.</p>
<p>A “Transparent” copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the general
public, that is suitable for revising the document straightforwardly
with generic text editors or (for images composed of pixels) generic
paint programs or (for drawings) some widely available drawing editor,
and that is suitable for input to text formatters or for automatic
translation to a variety of formats suitable for input to text
formatters. A copy made in an otherwise Transparent file format whose
markup, or absence of markup, has been arranged to thwart or discourage
subsequent modification by readers is not Transparent. An image format
is not Transparent if used for any substantial amount of text. A copy
that is not “Transparent” is called “Opaque”.</p>
<p>Examples of suitable formats for Transparent copies include plain
<em>ascii</em> without markup, Texinfo input format, LaTeX input format,
SGML or XML using a publicly available DTD, and standard-conforming
simple HTML, PostScript or PDF designed for human modification. Examples
of transparent image formats include PNG, XCF and JPG. Opaque formats
include proprietary formats that can be read and edited only by
proprietary word processors, SGML or XML for which the DTD and/or
processing tools are not generally available, and the machine-generated
HTML, PostScript or PDF produced by some word processors for output
purposes only.</p>
<p>The “Title Page” means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page. For works in formats
which do not have any title page as such, “Title Page” means the text
near the most prominent appearance of the work’s title, preceding the
beginning of the body of the text.</p>
<p>A section “Entitled XYZ” means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language. (Here XYZ stands for a
specific section name mentioned below, such as “Acknowledgements”,
“Dedications”, “Endorsements”, or “History”.) To “Preserve the Title” of
such a section when you modify the Document means that it remains a
section “Entitled XYZ” according to this definition.</p>
<p>The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document. These Warranty
Disclaimers are considered to be included by reference in this License,
but only as regards disclaiming warranties: any other implication that
these Warranty Disclaimers may have is void and has no effect on the
meaning of this License.</p>
<h3 id="verbatim-copying">Verbatim copying</h3>
<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies to
the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License. You may not use
technical measures to obstruct or control the reading or further copying
of the copies you make or distribute. However, you may accept
compensation in exchange for copies. If you distribute a large enough
number of copies you must also follow the conditions in section 3.</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.</p>
<h3 id="copying-in-quantity">Copying in quantity</h3>
<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document’s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover Texts:
Front-Cover Texts on the front cover, and Back-Cover Texts on the back
cover. Both covers must also clearly and legibly identify you as the
publisher of these copies. The front cover must present the full title
with all words of the title equally prominent and visible. You may add
other material on the covers in addition. Copying with changes limited
to the covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in other
respects.</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy a
computer-network location from which the general network-using public
has access to download using public-standard network protocols a
complete Transparent copy of the Document, free of added material. If
you use the latter option, you must take reasonably prudent steps, when
you begin distribution of Opaque copies in quantity, to ensure that this
Transparent copy will remain thus accessible at the stated location
until at least one year after the last time you distribute an Opaque
copy (directly or through your agents or retailers) of that edition to
the public.</p>
<p>It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of copies, to
give them a chance to provide you with an updated version of the
Document.</p>
<h3 id="modifications">Modifications</h3>
<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release the
Modified Version under precisely this License, with the Modified Version
filling the role of the Document, thus licensing distribution and
modification of the Modified Version to whoever possesses a copy of it.
In addition, you must do these things in the Modified Version:</p>
<ul>
<li><p>Use in the Title Page (and on the covers, if any) a title
distinct from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section of
the Document). You may use the same title as a previous version if the
original publisher of that version gives permission.</p></li>
<li><p>List on the Title Page, as authors, one or more persons or
entities responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.</p></li>
<li><p>State on the Title page the name of the publisher of the Modified
Version, as the publisher.</p></li>
<li><p>Preserve all the copyright notices of the Document.</p></li>
<li><p>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.</p></li>
<li><p>Include, immediately after the copyright notices, a license
notice giving the public permission to use the Modified Version under
the terms of this License, in the form shown in the Addendum
below.</p></li>
<li><p>Preserve in that license notice the full lists of Invariant
Sections and required Cover Texts given in the Document’s license
notice.</p></li>
<li><p>Include an unaltered copy of this License.</p></li>
<li><p>Preserve the section Entitled “History”, Preserve its Title, and
add to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page. If there
is no section Entitled “History” in the Document, create one stating the
title, year, authors, and publisher of the Document as given on its
Title Page, then add an item describing the Modified Version as stated
in the previous sentence.</p></li>
<li><p>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise the
network locations given in the Document for previous versions it was
based on. These may be placed in the “History” section. You may omit a
network location for a work that was published at least four years
before the Document itself, or if the original publisher of the version
it refers to gives permission.</p></li>
<li><p>For any section Entitled “Acknowledgements” or “Dedications”,
Preserve the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.</p></li>
<li><p>Preserve all the Invariant Sections of the Document, unaltered in
their text and in their titles. Section numbers or the equivalent are
not considered part of the section titles.</p></li>
<li><p>Delete any section Entitled “Endorsements”. Such a section may
not be included in the Modified Version.</p></li>
<li><p>Do not retitle any existing section to be Entitled “Endorsements”
or to conflict in title with any Invariant Section.</p></li>
<li><p>Preserve any Warranty Disclaimers.</p></li>
</ul>
<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant. To do this, add their titles to the list
of Invariant Sections in the Modified Version’s license notice. These
titles must be distinct from any other section titles.</p>
<p>You may add a section Entitled “Endorsements”, provided it contains
nothing but endorsements of your Modified Version by various parties—for
example, statements of peer review or that the text has been approved by
an organization as the authoritative definition of a standard.</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and
a passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version. Only one passage of Front-Cover
Text and one of Back-Cover Text may be added by (or through arrangements
made by) any one entity. If the Document already includes a cover text
for the same cover, previously added by you or by arrangement made by
the same entity you are acting on behalf of, you may not add another;
but you may replace the old one, on explicit permission from the
previous publisher that added the old one.</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.</p>
<h3 id="combining-documents">Combining documents</h3>
<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its license
notice, and that you preserve all their Warranty Disclaimers.</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy. If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by adding
at the end of it, in parentheses, the name of the original author or
publisher of that section if known, or else a unique number. Make the
same adjustment to the section titles in the list of Invariant Sections
in the license notice of the combined work.</p>
<p>In the combination, you must combine any sections Entitled “History”
in the various original documents, forming one section Entitled
“History”; likewise combine any sections Entitled “Acknowledgements”,
and any sections Entitled “Dedications”. You must delete all sections
Entitled “Endorsements.”</p>
<h3 id="collections-of-documents">Collections of documents</h3>
<p>You may make a collection consisting of the Document and other
documents released under this License, and replace the individual copies
of this License in the various documents with a single copy that is
included in the collection, provided that you follow the rules of this
License for verbatim copying of each of the documents in all other
respects.</p>
<p>You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert a
copy of this License into the extracted document, and follow this
License in all other respects regarding verbatim copying of that
document.</p>
<h3 id="aggregation-with-independent-works">Aggregation with independent
works</h3>
<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an “aggregate” if the copyright resulting
from the compilation is not used to limit the legal rights of the
compilation’s users beyond what the individual works permit. When the
Document is included in an aggregate, this License does not apply to the
other works in the aggregate which are not themselves derivative works
of the Document.</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document’s Cover Texts may be placed on covers
that bracket the Document within the aggregate, or the electronic
equivalent of covers if the Document is in electronic form. Otherwise
they must appear on printed covers that bracket the whole aggregate.</p>
<h3 id="translation">Translation</h3>
<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections. You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers. In case of a disagreement between the
translation and the original version of this License or a notice or
disclaimer, the original version will prevail.</p>
<p>If a section in the Document is Entitled “Acknowledgements”,
“Dedications”, or “History”, the requirement (section 4) to Preserve its
Title (section 1) will typically require changing the actual title.</p>
<h3 id="termination">Termination</h3>
<p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided for under this License. Any other attempt
to copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License. However, parties
who have received copies, or rights, from you under this License will
not have their licenses terminated so long as such parties remain in
full compliance.</p>
<h3 id="future-revisions-of-this-license">Future revisions of this
license</h3>
<p>The Free Software Foundation may publish new, revised versions of the
GNU Free Documentation License from time to time. Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns. See <a
href="http://www.gnu.org/copyleft/">www.gnu.org/copyleft</a></p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License “or any later version” applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation. If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.</p>
<h3 id="addendum-how-to-use-this-license-for-your-documents">Addendum:
how to use this License for your documents</h3>
<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and license
notices just after the title page:</p>
<pre><code>Copyright (C)  YEAR  YOUR NAME.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.2 or any later
version published by the Free Software Foundation; with no Invariant Sections,
no Front-Cover Texts, and no Back-Cover Texts.  A copy of the license is
included in the section entitled &quot;GNU Free Documentation License&quot;.</code></pre>
<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the “with…Texts.” phrase with this:</p>
<pre><code>with the Invariant Sections being LIST THEIR TITLES, with the Front-Cover
Texts being LIST, and with the Back-Cover Texts being LIST.</code></pre>
<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of free
software license, such as the GNU General Public License, to permit
their use in free software.</p>
